{"ast":null,"code":"import axios from 'axios';\nimport camelcaseKeys from 'camelcase-keys';\nimport { shakebook } from '@/service/api/v1/account_pb';\nimport { notification } from 'antd';\nimport api from '@/api';\nexport const SignIn = (req, props) => {\n  axios({\n    method: 'post',\n    url: api.signin,\n    data: req\n  }).then(function (res) {\n    var _ret$response;\n\n    let ret = shakebook.SignInResponse.fromObject(camelcaseKeys(res.data));\n\n    if (res.status === 200 && ((_ret$response = ret.response) === null || _ret$response === void 0 ? void 0 : _ret$response.success)) {\n      localStorage.setItem(\"token\", ret.data);\n      props.history.push(\"/\");\n    } else {\n      notification['warning']({\n        message: '登录提示',\n        description: ret.message\n      });\n    }\n  }).catch(function (error) {\n    notification['error']({\n      message: '登录提示',\n      description: \"请稍后重试\"\n    });\n  });\n};\n_c = SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/yangjiafeng/web-src/shake-book-manager/src/pages/login/store/actions.ts"],"names":["axios","camelcaseKeys","shakebook","notification","api","SignIn","req","props","method","url","signin","data","then","res","ret","SignInResponse","fromObject","status","response","success","localStorage","setItem","history","push","message","description","catch","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,SAASC,SAAT,QAA0B,6BAA1B;AACA,SAASC,YAAT,QAA6B,MAA7B;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,OAAO,MAAMC,MAAM,GAAG,CAACC,GAAD,EAAgCC,KAAhC,KAA+C;AACnEP,EAAAA,KAAK,CAAC;AACJQ,IAAAA,MAAM,EAAE,MADJ;AAEJC,IAAAA,GAAG,EAAEL,GAAG,CAACM,MAFL;AAGJC,IAAAA,IAAI,EAAEL;AAHF,GAAD,CAAL,CAIGM,IAJH,CAIQ,UAAUC,GAAV,EAAe;AAAA;;AACrB,QAAIC,GAA8B,GAChCZ,SAAS,CAACa,cAAV,CAAyBC,UAAzB,CACEf,aAAa,CAACY,GAAG,CAACF,IAAL,CADf,CADF;;AAIA,QAAIE,GAAG,CAACI,MAAJ,KAAe,GAAf,sBAAsBH,GAAG,CAACI,QAA1B,kDAAsB,cAAcC,OAApC,CAAJ,EAAiD;AAC/CC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,GAAG,CAACH,IAAlC;AACAJ,MAAAA,KAAK,CAACe,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD,KAHD,MAGO;AACLpB,MAAAA,YAAY,CAAC,SAAD,CAAZ,CAAwB;AACtBqB,QAAAA,OAAO,EAAE,MADa;AAEtBC,QAAAA,WAAW,EAAEX,GAAG,CAACU;AAFK,OAAxB;AAID;AACF,GAlBD,EAmBGE,KAnBH,CAmBS,UAAUC,KAAV,EAAiB;AACtBxB,IAAAA,YAAY,CAAC,OAAD,CAAZ,CAAsB;AACpBqB,MAAAA,OAAO,EAAE,MADW;AAEpBC,MAAAA,WAAW,EAAE;AAFO,KAAtB;AAID,GAxBH;AAyBD,CA1BM;KAAMpB,M","sourcesContent":["import axios from 'axios';\nimport camelcaseKeys from 'camelcase-keys'\nimport { shakebook } from '@/service/api/v1/account_pb'\nimport { notification } from 'antd';\nimport api from '@/api';\nexport const SignIn = (req: shakebook.ISignInRequest, props: any) => {\n  axios({\n    method: 'post',\n    url: api.signin,\n    data: req,\n  }).then(function (res) {\n    let ret: shakebook.ISignInResponse =\n      shakebook.SignInResponse.fromObject(\n        camelcaseKeys(res.data as Object)\n      )\n    if (res.status === 200 && ret.response?.success) {\n      localStorage.setItem(\"token\", ret.data as string);\n      props.history.push(\"/\");\n    } else {\n      notification['warning']({\n        message: '登录提示',\n        description: ret.message\n      });\n    }\n  })\n    .catch(function (error) {\n      notification['error']({\n        message: '登录提示',\n        description: \"请稍后重试\"\n      });\n    });\n}"]},"metadata":{},"sourceType":"module"}