{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BindingToSyntax = void 0;\n\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\n\nvar literal_types_1 = require(\"../constants/literal_types\");\n\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\n\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\n\nvar BindingToSyntax = function () {\n  function BindingToSyntax(binding) {\n    this._binding = binding;\n  }\n\n  BindingToSyntax.prototype.to = function (constructor) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n    this._binding.implementationType = constructor;\n    return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toSelf = function () {\n    if (typeof this._binding.serviceIdentifier !== \"function\") {\n      throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n    }\n\n    var self = this._binding.serviceIdentifier;\n    return this.to(self);\n  };\n\n  BindingToSyntax.prototype.toConstantValue = function (value) {\n    this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n    this._binding.cache = value;\n    this._binding.dynamicValue = null;\n    this._binding.implementationType = null;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toDynamicValue = function (func) {\n    this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n    this._binding.cache = null;\n    this._binding.dynamicValue = func;\n    this._binding.implementationType = null;\n    return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toConstructor = function (constructor) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n    this._binding.implementationType = constructor;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toFactory = function (factory) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n    this._binding.factory = factory;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toFunction = function (func) {\n    if (typeof func !== \"function\") {\n      throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n    }\n\n    var bindingWhenOnSyntax = this.toConstantValue(func);\n    this._binding.type = literal_types_1.BindingTypeEnum.Function;\n    return bindingWhenOnSyntax;\n  };\n\n  BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n\n    this._binding.factory = function (context) {\n      var autofactory = function () {\n        return context.container.get(serviceIdentifier);\n      };\n\n      return autofactory;\n    };\n\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toProvider = function (provider) {\n    this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n    this._binding.provider = provider;\n    return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n  };\n\n  BindingToSyntax.prototype.toService = function (service) {\n    this.toDynamicValue(function (context) {\n      return context.container.get(service);\n    });\n  };\n\n  return BindingToSyntax;\n}();\n\nexports.BindingToSyntax = BindingToSyntax;","map":{"version":3,"sources":["/Users/yangjiafeng/web-src/shake-book-manager/node_modules/inversify/lib/syntax/binding_to_syntax.js"],"names":["Object","defineProperty","exports","value","BindingToSyntax","ERROR_MSGS","require","literal_types_1","binding_in_when_on_syntax_1","binding_when_on_syntax_1","binding","_binding","prototype","to","constructor","type","BindingTypeEnum","Instance","implementationType","BindingInWhenOnSyntax","toSelf","serviceIdentifier","Error","INVALID_TO_SELF_VALUE","self","toConstantValue","ConstantValue","cache","dynamicValue","BindingWhenOnSyntax","toDynamicValue","func","DynamicValue","toConstructor","Constructor","toFactory","factory","Factory","toFunction","INVALID_FUNCTION_BINDING","bindingWhenOnSyntax","Function","toAutoFactory","context","autofactory","container","get","toProvider","provider","Provider","toService","service"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingToSyntax = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = literal_types_1.BindingTypeEnum.Function;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\n            return autofactory;\n        };\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toService = function (service) {\n        this.toDynamicValue(function (context) { return context.container.get(service); });\n    };\n    return BindingToSyntax;\n}());\nexports.BindingToSyntax = BindingToSyntax;\n"]},"metadata":{},"sourceType":"script"}