{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.typeConstraint = exports.namedConstraint = exports.taggedConstraint = exports.traverseAncerstors = void 0;\n\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\n\nvar metadata_1 = require(\"../planning/metadata\");\n\nvar traverseAncerstors = function (request, constraint) {\n  var parent = request.parentRequest;\n\n  if (parent !== null) {\n    return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n  } else {\n    return false;\n  }\n};\n\nexports.traverseAncerstors = traverseAncerstors;\n\nvar taggedConstraint = function (key) {\n  return function (value) {\n    var constraint = function (request) {\n      return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n  };\n};\n\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\n\nvar typeConstraint = function (type) {\n  return function (request) {\n    var binding = null;\n\n    if (request !== null) {\n      binding = request.bindings[0];\n\n      if (typeof type === \"string\") {\n        var serviceIdentifier = binding.serviceIdentifier;\n        return serviceIdentifier === type;\n      } else {\n        var constructor = request.bindings[0].implementationType;\n        return type === constructor;\n      }\n    }\n\n    return false;\n  };\n};\n\nexports.typeConstraint = typeConstraint;","map":{"version":3,"sources":["/Users/yangjiafeng/web-src/shake-book-manager/node_modules/inversify/lib/syntax/constraint_helpers.js"],"names":["Object","defineProperty","exports","value","typeConstraint","namedConstraint","taggedConstraint","traverseAncerstors","METADATA_KEY","require","metadata_1","request","constraint","parent","parentRequest","key","target","matchesTag","metaData","Metadata","NAMED_TAG","type","binding","bindings","serviceIdentifier","constructor","implementationType"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,cAAR,GAAyBF,OAAO,CAACG,eAAR,GAA0BH,OAAO,CAACI,gBAAR,GAA2BJ,OAAO,CAACK,kBAAR,GAA6B,KAAK,CAAhH;;AACA,IAAIC,YAAY,GAAGC,OAAO,CAAC,4BAAD,CAA1B;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,sBAAD,CAAxB;;AACA,IAAIF,kBAAkB,GAAG,UAAUI,OAAV,EAAmBC,UAAnB,EAA+B;AACpD,MAAIC,MAAM,GAAGF,OAAO,CAACG,aAArB;;AACA,MAAID,MAAM,KAAK,IAAf,EAAqB;AACjB,WAAOD,UAAU,CAACC,MAAD,CAAV,GAAqB,IAArB,GAA4BN,kBAAkB,CAACM,MAAD,EAASD,UAAT,CAArD;AACH,GAFD,MAGK;AACD,WAAO,KAAP;AACH;AACJ,CARD;;AASAV,OAAO,CAACK,kBAAR,GAA6BA,kBAA7B;;AACA,IAAID,gBAAgB,GAAG,UAAUS,GAAV,EAAe;AAAE,SAAO,UAAUZ,KAAV,EAAiB;AAC5D,QAAIS,UAAU,GAAG,UAAUD,OAAV,EAAmB;AAChC,aAAOA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,CAACK,MAAR,KAAmB,IAAvC,IAA+CL,OAAO,CAACK,MAAR,CAAeC,UAAf,CAA0BF,GAA1B,EAA+BZ,KAA/B,CAAtD;AACH,KAFD;;AAGAS,IAAAA,UAAU,CAACM,QAAX,GAAsB,IAAIR,UAAU,CAACS,QAAf,CAAwBJ,GAAxB,EAA6BZ,KAA7B,CAAtB;AACA,WAAOS,UAAP;AACH,GANuC;AAMpC,CANJ;;AAOAV,OAAO,CAACI,gBAAR,GAA2BA,gBAA3B;AACA,IAAID,eAAe,GAAGC,gBAAgB,CAACE,YAAY,CAACY,SAAd,CAAtC;AACAlB,OAAO,CAACG,eAAR,GAA0BA,eAA1B;;AACA,IAAID,cAAc,GAAG,UAAUiB,IAAV,EAAgB;AAAE,SAAO,UAAUV,OAAV,EAAmB;AAC7D,QAAIW,OAAO,GAAG,IAAd;;AACA,QAAIX,OAAO,KAAK,IAAhB,EAAsB;AAClBW,MAAAA,OAAO,GAAGX,OAAO,CAACY,QAAR,CAAiB,CAAjB,CAAV;;AACA,UAAI,OAAOF,IAAP,KAAgB,QAApB,EAA8B;AAC1B,YAAIG,iBAAiB,GAAGF,OAAO,CAACE,iBAAhC;AACA,eAAOA,iBAAiB,KAAKH,IAA7B;AACH,OAHD,MAIK;AACD,YAAII,WAAW,GAAGd,OAAO,CAACY,QAAR,CAAiB,CAAjB,EAAoBG,kBAAtC;AACA,eAAOL,IAAI,KAAKI,WAAhB;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GAdsC;AAcnC,CAdJ;;AAeAvB,OAAO,CAACE,cAAR,GAAyBA,cAAzB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.typeConstraint = exports.namedConstraint = exports.taggedConstraint = exports.traverseAncerstors = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n"]},"metadata":{},"sourceType":"script"}