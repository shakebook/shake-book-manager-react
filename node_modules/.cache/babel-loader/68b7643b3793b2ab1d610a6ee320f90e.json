{"ast":null,"code":"import axios from 'axios';\nimport { shakebook } from '@/service/api/v1/account_pb';\nimport camelcaseKeys from 'camelcase-keys';\nimport { notification } from 'antd';\nexport const SignIn = req => {\n  axios({\n    method: 'post',\n    url: '/api/v1/signin',\n    data: req\n  }).then(function (res) {\n    console.log(res.status);\n\n    if (res.status === 200) {\n      let ret = shakebook.SignInResponse.fromObject(camelcaseKeys(res.data));\n      console.log(ret);\n      localStorage.setItem(\"token\", ret.token);\n    } else {\n      notification['error']({\n        message: '登录提示',\n        description: res.statusText\n      });\n    }\n  }).catch(function (error) {\n    let ret = shakebook.ErrorResponse.fromObject(camelcaseKeys(error));\n    console.log(ret);\n    console.log(\"error\", error);\n    notification['error']({\n      message: '登录提示',\n      description: \"sldkfjskldf\"\n    });\n  });\n};\n_c = SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/yangjiafeng/web-src/shake-book-manager/src/pages/login/store/actions.ts"],"names":["axios","shakebook","camelcaseKeys","notification","SignIn","req","method","url","data","then","res","console","log","status","ret","SignInResponse","fromObject","localStorage","setItem","token","message","description","statusText","catch","error","ErrorResponse"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,6BAA1B;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,SAASC,YAAT,QAA6B,MAA7B;AACA,OAAO,MAAMC,MAAM,GAAIC,GAAD,IAAmC;AACvDL,EAAAA,KAAK,CAAC;AACJM,IAAAA,MAAM,EAAE,MADJ;AAEJC,IAAAA,GAAG,EAAE,gBAFD;AAGJC,IAAAA,IAAI,EAAEH;AAHF,GAAD,CAAL,CAIGI,IAJH,CAIQ,UAAUC,GAAV,EAAe;AACrBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,MAAhB;;AACA,QAAIH,GAAG,CAACG,MAAJ,KAAe,GAAnB,EAAwB;AACtB,UAAIC,GAA8B,GAChCb,SAAS,CAACc,cAAV,CAAyBC,UAAzB,CACEd,aAAa,CAACQ,GAAG,CAACF,IAAL,CADf,CADF;AAIAG,MAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACAG,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,GAAG,CAACK,KAAlC;AACD,KAPD,MAOO;AACLhB,MAAAA,YAAY,CAAC,OAAD,CAAZ,CAAsB;AACpBiB,QAAAA,OAAO,EAAE,MADW;AAEpBC,QAAAA,WAAW,EAAEX,GAAG,CAACY;AAFG,OAAtB;AAKD;AAGF,GAtBD,EAuBGC,KAvBH,CAuBS,UAAUC,KAAV,EAAiB;AACtB,QAAIV,GAA4B,GAC9Bb,SAAS,CAACwB,aAAV,CAAwBT,UAAxB,CACEd,aAAa,CAACsB,KAAD,CADf,CADF;AAIAb,IAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBY,KAArB;AACArB,IAAAA,YAAY,CAAC,OAAD,CAAZ,CAAsB;AACpBiB,MAAAA,OAAO,EAAE,MADW;AAEpBC,MAAAA,WAAW,EAAE;AAFO,KAAtB;AAKD,GAnCH;AAoCD,CArCM;KAAMjB,M","sourcesContent":["import axios from 'axios';\nimport { shakebook } from '@/service/api/v1/account_pb'\nimport camelcaseKeys from 'camelcase-keys'\nimport { notification } from 'antd';\nexport const SignIn = (req: shakebook.ISignInRequest) => {\n  axios({\n    method: 'post',\n    url: '/api/v1/signin',\n    data: req,\n  }).then(function (res) {\n    console.log(res.status);\n    if (res.status === 200) {\n      let ret: shakebook.ISignInResponse =\n        shakebook.SignInResponse.fromObject(\n          camelcaseKeys(res.data as Object)\n        )\n      console.log(ret);\n      localStorage.setItem(\"token\", ret.token as string);\n    } else {\n      notification['error']({\n        message: '登录提示',\n        description: res.statusText\n\n      });\n    }\n\n\n  })\n    .catch(function (error) {\n      let ret: shakebook.ErrorResponse =\n        shakebook.ErrorResponse.fromObject(\n          camelcaseKeys(error as Object)\n        )\n      console.log(ret);\n      console.log(\"error\", error);\n      notification['error']({\n        message: '登录提示',\n        description: \"sldkfjskldf\"\n\n      });\n    });\n}"]},"metadata":{},"sourceType":"module"}