{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Container = void 0;\n\nvar binding_1 = require(\"../bindings/binding\");\n\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\n\nvar literal_types_1 = require(\"../constants/literal_types\");\n\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\n\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\n\nvar planner_1 = require(\"../planning/planner\");\n\nvar resolver_1 = require(\"../resolution/resolver\");\n\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\n\nvar id_1 = require(\"../utils/id\");\n\nvar serialization_1 = require(\"../utils/serialization\");\n\nvar container_snapshot_1 = require(\"./container_snapshot\");\n\nvar lookup_1 = require(\"./lookup\");\n\nvar Container = function () {\n  function Container(containerOptions) {\n    var options = containerOptions || {};\n\n    if (typeof options !== \"object\") {\n      throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n    }\n\n    if (options.defaultScope === undefined) {\n      options.defaultScope = literal_types_1.BindingScopeEnum.Transient;\n    } else if (options.defaultScope !== literal_types_1.BindingScopeEnum.Singleton && options.defaultScope !== literal_types_1.BindingScopeEnum.Transient && options.defaultScope !== literal_types_1.BindingScopeEnum.Request) {\n      throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n    }\n\n    if (options.autoBindInjectable === undefined) {\n      options.autoBindInjectable = false;\n    } else if (typeof options.autoBindInjectable !== \"boolean\") {\n      throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n    }\n\n    if (options.skipBaseClassChecks === undefined) {\n      options.skipBaseClassChecks = false;\n    } else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n      throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n    }\n\n    this.options = {\n      autoBindInjectable: options.autoBindInjectable,\n      defaultScope: options.defaultScope,\n      skipBaseClassChecks: options.skipBaseClassChecks\n    };\n    this.id = id_1.id();\n    this._bindingDictionary = new lookup_1.Lookup();\n    this._snapshots = [];\n    this._middleware = null;\n    this.parent = null;\n    this._metadataReader = new metadata_reader_1.MetadataReader();\n  }\n\n  Container.merge = function (container1, container2) {\n    var container = new Container();\n    var bindingDictionary = planner_1.getBindingDictionary(container);\n    var bindingDictionary1 = planner_1.getBindingDictionary(container1);\n    var bindingDictionary2 = planner_1.getBindingDictionary(container2);\n\n    function copyDictionary(origin, destination) {\n      origin.traverse(function (key, value) {\n        value.forEach(function (binding) {\n          destination.add(binding.serviceIdentifier, binding.clone());\n        });\n      });\n    }\n\n    copyDictionary(bindingDictionary1, bindingDictionary);\n    copyDictionary(bindingDictionary2, bindingDictionary);\n    return container;\n  };\n\n  Container.prototype.load = function () {\n    var modules = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      modules[_i] = arguments[_i];\n    }\n\n    var getHelpers = this._getContainerModuleHelpersFactory();\n\n    for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n      var currentModule = modules_1[_a];\n      var containerModuleHelpers = getHelpers(currentModule.id);\n      currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n    }\n  };\n\n  Container.prototype.loadAsync = function () {\n    var modules = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      modules[_i] = arguments[_i];\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            getHelpers = this._getContainerModuleHelpersFactory();\n            _a = 0, modules_2 = modules;\n            _b.label = 1;\n\n          case 1:\n            if (!(_a < modules_2.length)) return [3, 4];\n            currentModule = modules_2[_a];\n            containerModuleHelpers = getHelpers(currentModule.id);\n            return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n\n          case 2:\n            _b.sent();\n\n            _b.label = 3;\n\n          case 3:\n            _a++;\n            return [3, 1];\n\n          case 4:\n            return [2];\n        }\n      });\n    });\n  };\n\n  Container.prototype.unload = function () {\n    var _this = this;\n\n    var modules = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      modules[_i] = arguments[_i];\n    }\n\n    var conditionFactory = function (expected) {\n      return function (item) {\n        return item.moduleId === expected;\n      };\n    };\n\n    modules.forEach(function (module) {\n      var condition = conditionFactory(module.id);\n\n      _this._bindingDictionary.removeByCondition(condition);\n    });\n  };\n\n  Container.prototype.bind = function (serviceIdentifier) {\n    var scope = this.options.defaultScope || literal_types_1.BindingScopeEnum.Transient;\n    var binding = new binding_1.Binding(serviceIdentifier, scope);\n\n    this._bindingDictionary.add(serviceIdentifier, binding);\n\n    return new binding_to_syntax_1.BindingToSyntax(binding);\n  };\n\n  Container.prototype.rebind = function (serviceIdentifier) {\n    this.unbind(serviceIdentifier);\n    return this.bind(serviceIdentifier);\n  };\n\n  Container.prototype.unbind = function (serviceIdentifier) {\n    try {\n      this._bindingDictionary.remove(serviceIdentifier);\n    } catch (e) {\n      throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n    }\n  };\n\n  Container.prototype.unbindAll = function () {\n    this._bindingDictionary = new lookup_1.Lookup();\n  };\n\n  Container.prototype.isBound = function (serviceIdentifier) {\n    var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n\n    if (!bound && this.parent) {\n      bound = this.parent.isBound(serviceIdentifier);\n    }\n\n    return bound;\n  };\n\n  Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n    return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n  };\n\n  Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n    var bound = false;\n\n    if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n      var bindings = this._bindingDictionary.get(serviceIdentifier);\n\n      var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n      bound = bindings.some(function (b) {\n        return b.constraint(request_1);\n      });\n    }\n\n    if (!bound && this.parent) {\n      bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n    }\n\n    return bound;\n  };\n\n  Container.prototype.snapshot = function () {\n    this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n  };\n\n  Container.prototype.restore = function () {\n    var snapshot = this._snapshots.pop();\n\n    if (snapshot === undefined) {\n      throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n    }\n\n    this._bindingDictionary = snapshot.bindings;\n    this._middleware = snapshot.middleware;\n  };\n\n  Container.prototype.createChild = function (containerOptions) {\n    var child = new Container(containerOptions || this.options);\n    child.parent = this;\n    return child;\n  };\n\n  Container.prototype.applyMiddleware = function () {\n    var middlewares = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      middlewares[_i] = arguments[_i];\n    }\n\n    var initial = this._middleware ? this._middleware : this._planAndResolve();\n    this._middleware = middlewares.reduce(function (prev, curr) {\n      return curr(prev);\n    }, initial);\n  };\n\n  Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n    this._metadataReader = metadataReader;\n  };\n\n  Container.prototype.get = function (serviceIdentifier) {\n    return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n  };\n\n  Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n    return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n  };\n\n  Container.prototype.getNamed = function (serviceIdentifier, named) {\n    return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n  };\n\n  Container.prototype.getAll = function (serviceIdentifier) {\n    return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n  };\n\n  Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n    return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n  };\n\n  Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n    return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n  };\n\n  Container.prototype.resolve = function (constructorFunction) {\n    var tempContainer = this.createChild();\n    tempContainer.bind(constructorFunction).toSelf();\n    return tempContainer.get(constructorFunction);\n  };\n\n  Container.prototype._getContainerModuleHelpersFactory = function () {\n    var _this = this;\n\n    var setModuleId = function (bindingToSyntax, moduleId) {\n      bindingToSyntax._binding.moduleId = moduleId;\n    };\n\n    var getBindFunction = function (moduleId) {\n      return function (serviceIdentifier) {\n        var _bind = _this.bind.bind(_this);\n\n        var bindingToSyntax = _bind(serviceIdentifier);\n\n        setModuleId(bindingToSyntax, moduleId);\n        return bindingToSyntax;\n      };\n    };\n\n    var getUnbindFunction = function (moduleId) {\n      return function (serviceIdentifier) {\n        var _unbind = _this.unbind.bind(_this);\n\n        _unbind(serviceIdentifier);\n      };\n    };\n\n    var getIsboundFunction = function (moduleId) {\n      return function (serviceIdentifier) {\n        var _isBound = _this.isBound.bind(_this);\n\n        return _isBound(serviceIdentifier);\n      };\n    };\n\n    var getRebindFunction = function (moduleId) {\n      return function (serviceIdentifier) {\n        var _rebind = _this.rebind.bind(_this);\n\n        var bindingToSyntax = _rebind(serviceIdentifier);\n\n        setModuleId(bindingToSyntax, moduleId);\n        return bindingToSyntax;\n      };\n    };\n\n    return function (mId) {\n      return {\n        bindFunction: getBindFunction(mId),\n        isboundFunction: getIsboundFunction(mId),\n        rebindFunction: getRebindFunction(mId),\n        unbindFunction: getUnbindFunction(mId)\n      };\n    };\n  };\n\n  Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n    var result = null;\n    var defaultArgs = {\n      avoidConstraints: avoidConstraints,\n      contextInterceptor: function (context) {\n        return context;\n      },\n      isMultiInject: isMultiInject,\n      key: key,\n      serviceIdentifier: serviceIdentifier,\n      targetType: targetType,\n      value: value\n    };\n\n    if (this._middleware) {\n      result = this._middleware(defaultArgs);\n\n      if (result === undefined || result === null) {\n        throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n      }\n    } else {\n      result = this._planAndResolve()(defaultArgs);\n    }\n\n    return result;\n  };\n\n  Container.prototype._planAndResolve = function () {\n    var _this = this;\n\n    return function (args) {\n      var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n      context = args.contextInterceptor(context);\n      var result = resolver_1.resolve(context);\n      return result;\n    };\n  };\n\n  return Container;\n}();\n\nexports.Container = Container;","map":{"version":3,"sources":["/Users/yangjiafeng/web-src/shake-book-manager/node_modules/inversify/lib/container/container.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","_","label","sent","t","trys","ops","f","y","g","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","Container","binding_1","require","ERROR_MSGS","literal_types_1","METADATA_KEY","metadata_reader_1","planner_1","resolver_1","binding_to_syntax_1","id_1","serialization_1","container_snapshot_1","lookup_1","containerOptions","options","Error","CONTAINER_OPTIONS_MUST_BE_AN_OBJECT","defaultScope","undefined","BindingScopeEnum","Transient","Singleton","Request","CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE","autoBindInjectable","CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE","skipBaseClassChecks","CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK","id","_bindingDictionary","Lookup","_snapshots","_middleware","parent","_metadataReader","MetadataReader","merge","container1","container2","container","bindingDictionary","getBindingDictionary","bindingDictionary1","bindingDictionary2","copyDictionary","origin","destination","traverse","key","forEach","binding","add","serviceIdentifier","clone","prototype","load","modules","_i","arguments","getHelpers","_getContainerModuleHelpersFactory","_a","modules_1","currentModule","containerModuleHelpers","registry","bindFunction","unbindFunction","isboundFunction","rebindFunction","loadAsync","modules_2","_b","unload","_this","conditionFactory","expected","item","moduleId","module","condition","removeByCondition","bind","scope","Binding","BindingToSyntax","rebind","unbind","remove","CANNOT_UNBIND","getServiceIdentifierAsString","unbindAll","isBound","bound","hasKey","isBoundNamed","named","isBoundTagged","NAMED_TAG","bindings","get","request_1","createMockRequest","some","b","constraint","snapshot","ContainerSnapshot","of","restore","NO_MORE_SNAPSHOTS_AVAILABLE","middleware","createChild","child","applyMiddleware","middlewares","initial","_planAndResolve","reduce","prev","curr","applyCustomMetadataReader","metadataReader","_get","TargetTypeEnum","Variable","getTagged","getNamed","getAll","getAllTagged","getAllNamed","constructorFunction","tempContainer","toSelf","setModuleId","bindingToSyntax","_binding","getBindFunction","_bind","getUnbindFunction","_unbind","getIsboundFunction","_isBound","getRebindFunction","_rebind","mId","avoidConstraints","isMultiInject","targetType","defaultArgs","contextInterceptor","context","INVALID_MIDDLEWARE_RETURN","args","plan"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Container = void 0;\nvar binding_1 = require(\"../bindings/binding\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\nvar planner_1 = require(\"../planning/planner\");\nvar resolver_1 = require(\"../resolution/resolver\");\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\nvar id_1 = require(\"../utils/id\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar container_snapshot_1 = require(\"./container_snapshot\");\nvar lookup_1 = require(\"./lookup\");\nvar Container = (function () {\n    function Container(containerOptions) {\n        var options = containerOptions || {};\n        if (typeof options !== \"object\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n        }\n        if (options.defaultScope === undefined) {\n            options.defaultScope = literal_types_1.BindingScopeEnum.Transient;\n        }\n        else if (options.defaultScope !== literal_types_1.BindingScopeEnum.Singleton &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Transient &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Request) {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n        }\n        if (options.autoBindInjectable === undefined) {\n            options.autoBindInjectable = false;\n        }\n        else if (typeof options.autoBindInjectable !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n        }\n        if (options.skipBaseClassChecks === undefined) {\n            options.skipBaseClassChecks = false;\n        }\n        else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n        }\n        this.options = {\n            autoBindInjectable: options.autoBindInjectable,\n            defaultScope: options.defaultScope,\n            skipBaseClassChecks: options.skipBaseClassChecks\n        };\n        this.id = id_1.id();\n        this._bindingDictionary = new lookup_1.Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new metadata_reader_1.MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container = new Container();\n        var bindingDictionary = planner_1.getBindingDictionary(container);\n        var bindingDictionary1 = planner_1.getBindingDictionary(container1);\n        var bindingDictionary2 = planner_1.getBindingDictionary(container2);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        copyDictionary(bindingDictionary1, bindingDictionary);\n        copyDictionary(bindingDictionary2, bindingDictionary);\n        return container;\n    };\n    Container.prototype.load = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var getHelpers = this._getContainerModuleHelpersFactory();\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n            var currentModule = modules_1[_a];\n            var containerModuleHelpers = getHelpers(currentModule.id);\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n        }\n    };\n    Container.prototype.loadAsync = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        getHelpers = this._getContainerModuleHelpersFactory();\n                        _a = 0, modules_2 = modules;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_a < modules_2.length)) return [3, 4];\n                        currentModule = modules_2[_a];\n                        containerModuleHelpers = getHelpers(currentModule.id);\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _a++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.id);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var scope = this.options.defaultScope || literal_types_1.BindingScopeEnum.Transient;\n        var binding = new binding_1.Binding(serviceIdentifier, scope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new binding_to_syntax_1.BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new lookup_1.Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function (containerOptions) {\n        var child = new Container(containerOptions || this.options);\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = this.createChild();\n        tempContainer.bind(constructorFunction).toSelf();\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._getContainerModuleHelpersFactory = function () {\n        var _this = this;\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _bind = _this.bind.bind(_this);\n                var bindingToSyntax = _bind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _rebind = _this.rebind.bind(_this);\n                var bindingToSyntax = _rebind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        return function (mId) { return ({\n            bindFunction: getBindFunction(mId),\n            isboundFunction: getIsboundFunction(mId),\n            rebindFunction: getRebindFunction(mId),\n            unbindFunction: getUnbindFunction(mId)\n        }); };\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolver_1.resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexports.Container = Container;\n"]},"metadata":{},"sourceType":"script"}